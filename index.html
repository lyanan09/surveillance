<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>surveillance</title>
  <link rel="stylesheet" href="./styles/style.css">
  <!-- <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.js"></script> -->
</head>

<body>
  <div class="text-white">
    <ul>
      <li><a href="./cam_trace.html">cam_trace</a></li>
      <li><a href="./cam_trace_sound.html">cam_trace_sound</a></li>
      <li><a href="./cam_generative.html">cam_generative</a></li>
      <li><a href="./cam_mirror.html">cam_mirror</a></li>
      <li><a href="./imgs_show.html">imgs_show</a></li>
      <li><a href="./imgs_show_2.html">imgs_show_2</a></li>
    </ul>
  </div>
  <div class="">
    <span>Name</span>
    <input type="text" placeholder="Name" required>
  </div>
  <div class="">
    <span>Age</span>
    <input type="text" placeholder="Age" required>
  </div>
  <div class="">
    <span>Birthday</span>
    <input type="text" placeholder="Birthday" required>
  </div>
  <div class="">
    <span>Gender</span>
    <input type="text" placeholder="Gender" required>
  </div>
  <div class="">
    <span>Phone</span>
    <input type="text" placeholder="Phone" required>
  </div>
  <div class="">
    <span>Email</span>
    <input type="text" placeholder="Email" required>
  </div>
  <div class="">
    <input type="radio" required>
    <a href="#">Privacy Policy</a>
  </div>
  <div class="">
    <input type="checkbox" name="media" disabled required>
    <span>get media</span>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
<script>
(function() {
  if (Cookies.get('streamid')) {
    var checkboxes = document.querySelectorAll('input[type=checkbox][name=media]')
    for (var i = 0; i < checkboxes.length; i++) {
      checkboxes[i].checked = true;
    }
  } else if (navigator.mediaDevices.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.getUserMedia) {
    getUserMedia(success, error)
  }
})();

function getUserMedia(success, error) {
  let constraints = { audio: true, video: true }

  if (navigator.mediaDevices.getUserMedia) {
    //new api
    navigator.mediaDevices.getUserMedia(constraints).then(success).catch(error);
  } else if (navigator.webkitGetUserMedia) {
    //webkit
    navigator.webkitGetUserMedia(constraints, success, error)
  } else if (navigator.mozGetUserMedia) {
    //firefox
    navigator.mozGetUserMedia(constraints, success, error)
  } else if (navigator.getUserMedia) {
    //old api
    navigator.getUserMedia(constraints, success, error)
  }
}

function success(stream) {
  console.log('---success', stream)
  Cookies.set('streamid', stream.id)
}

function error(error) {
  console.log('---error', error)
}
</script>

</html>